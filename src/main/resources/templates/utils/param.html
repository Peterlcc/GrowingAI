<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="">
	<meta name="author" content="">

	<title>参数自动调整可视化</title>

	<!-- Bootstrap core CSS -->
	<link th:href="@{/webjars/bootstrap/4.3.1/css/bootstrap.css}" href="asserts/css/bootstrap.min.css" rel="stylesheet">

	<!-- Custom styles for this template -->
	<link th:href="@{/css/modern-business.css}" href="css/modern-business.css" rel="stylesheet">
	<link th:href="@{/css/codemirror/codemirror.css}" rel="stylesheet">
	<link th:href="@{/css/codemirror/simplescrollbars.css}" rel="stylesheet">
	<link th:href="@{/css/codemirror/idea.css}" rel="stylesheet">

</head>

<body>

<div th:replace="commons/base::topbar"></div>

<!-- Page Content -->
<div class="container">

	<!-- Page Heading/Breadcrumbs -->
	<h1 class="mt-4 mb-3">可成长系统之
		<small>参数自动调整可视化</small>
	</h1>

	<ol class="breadcrumb">
		<li class="breadcrumb-item">
			<a th:href="@{/index}" href="index.html">首页</a>
		</li>
		<li class="breadcrumb-item active">参数自动调整可视化</li>
	</ol>

		<div class="row" >
			<div th:attr="url=@{/visual/data}" class="col-lg-12" id="container" style="height: 800px"></div>
			<!-- Post Content Column -->
		</div>
		<!-- /.row -->

	</div>
	<!-- /.container -->




<!-- Bootstrap core JavaScript -->
<script type="text/javascript" th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/webjars/bootstrap/4.3.1/js/bootstrap.bundle.js}"></script>
<script type="text/javascript" th:src="@{/js/LuTree.js}"></script>
<script type="text/javascript" th:src="@{/js/codemirror/codemirror.js}"></script>
<script type="text/javascript" th:src="@{/js/codemirror/simplescrollbars.js}"></script>
<script type="text/javascript" th:src="@{/js/codemirror/python.js}"></script>
<script type="text/javascript" th:src="@{/js/codemirror/cmake.js}"></script>
<script type="text/javascript" th:src="@{/js/codemirror/clike.js}"></script>
<script type="text/javascript" th:src="@{/js/codemirror/xml.js}"></script>

<script type="text/javascript" th:src="@{/js/echarts/echarts.min.js}"></script>
<script type="text/javascript" th:src="@{/js/echarts/echarts-gl.min.js}"></script>
<script type="text/javascript" th:src="@{/js/echarts/ecStat.min.js}"></script>
<script type="text/javascript" th:src="@{/js/echarts/dataTool.min.js}"></script>
<script type="text/javascript" th:src="@{/js/echarts/china.js}"></script>
<script type="text/javascript" th:src="@{/js/echarts/world.js}"></script>
<script type="text/javascript" th:src="@{/js/echarts/bmap.min.js}"></script>

</body>
<script th:inline="javascript">

	$.ajax({
		//几个参数需要注意一下
		type: "GET",//方法类型
		// dataType: "json",//预期服务器返回的数据类型
		url: $('#container').attr("url") ,//url
		success: function (result) {
			console.log(result);//打印服务端返回的数据(调试用)
			var data = JSON.parse(result);
			var startTime=data['start'];
			var endTime=data['end'];
			var types=data['types'];
			var xLabels=data['xLabels'];
			var items=new Array();
			data.forEach(function (value, key) {
				var item=new Object();
				item['name']=key;
				item['type']='line';
				item['data']=value;
				items.push(item);
			});

			var dom = document.getElementById("container");
			var myChart = echarts.init(dom);
			var app = {};
			option = null;
			option = {
				title: {
					text: '算法折线图('+startTime+'-'+endTime+')'
				},
				tooltip: {
					trigger: 'axis'
				},
				legend: {
					data: types
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				toolbox: {
					feature: {
						saveAsImage: {}
					}
				},
				xAxis: {
					type: 'category',
					boundaryGap: false,
					data: xLabels
				},
				yAxis: {
					type: 'value'
				},
				series: items
			};
			if (option && typeof option === "object") {
				myChart.setOption(option, true);
			}
		},
		error : function() {
			alert("异常！出问题了");
		}
	});

</script>
</html>
